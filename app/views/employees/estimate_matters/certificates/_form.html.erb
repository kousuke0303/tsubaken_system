<div class="row">
  <div class="col-md-6">
    <div class="picture_area">
      <%= image_tag url_for(@image.image.variant(combine_options:{gravity: :center, resize:"300x300^",crop:"300x300+0+0"})) %>
    </div>
  </div>

  <div class="col-md-6">
    <h6 class="mb-15">① デフォルト診断書選択</h6>
    <select class="form-control" id="certificate_id" name="certificate[title]">
      <% @certificates.distinct.select(:title).each do |certificate| %>
        <option><%= certificate.title %></option>
      <% end %>
    </select>
    
    <h6 class="mt-15">② タイトル編集</h6>
    <%= f.label :title %>
    <%= f.text_field :title, id: "title", value: "#{ @certificates.first.title }", maxlength: 30, class: "form-control" %>
    
    <%= f.label :content %>
    <%= f.text_area :content, id: "certificate_content", value: "#{ @certificates.first.content }", maxlength: 300, class: "form-control", style: "height: 15em" %>
    
    <%= f.hidden_field :image_id, value: params[:image_id] %>
  </div>
</div>

<script>
 (function () {
    const auto_content = {
      'content': [
        <% @certificates.each do |certificate| %>
          "<%= certificate.content %>",
        <% end %>
      ]
    };
    document.getElementById('certificate_id').addEventListener('change', select_action, false);
    function select_action() {
      const selected_content = document.getElementById('certificate_id').selectedIndex;
      document.getElementById('certificate_content').value = auto_content['content'][selected_content];
    }
 }());

 (function () {
    const auto_content = {
      'title': [
        <% @certificates.each do |certificate| %>
          "<%= certificate.title %>",
        <% end %>
      ]
    };
    document.getElementById('certificate_id').addEventListener('change', select_action, false);
    function select_action() {
      const selected_content = document.getElementById('certificate_id').selectedIndex;
      document.getElementById('title').value = auto_content['title'][selected_content];
    }
 }());
</script>